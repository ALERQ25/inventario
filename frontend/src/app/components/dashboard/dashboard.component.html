<!-- src/app/components/dashboard/dashboard.component.html -->
<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <h2><i class="bi bi-graph-up"></i> Dashboard de Inventario</h2>
    <button class="btn btn-primary" (click)="cargarDatos()">
      <i class="bi bi-arrow-clockwise"></i> Actualizar
    </button>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="mensajeError" class="alert alert-danger alert-dismissible fade show" role="alert">
    <i class="bi bi-exclamation-triangle-fill"></i> {{ mensajeError }}
    <button type="button" class="btn-close" (click)="mensajeError = ''"></button>
  </div>

  <!-- Tarjetas de Estadísticas -->
  <div class="estadisticas-grid" *ngIf="!cargandoEstadisticas && estadisticas">
    <div class="stat-card stat-primary">
      <div class="stat-icon">
        <i class="bi bi-box-seam"></i>
      </div>
      <div class="stat-content">
        <h3>{{ estadisticas.total_productos }}</h3>
        <p>Total Productos</p>
      </div>
    </div>

    <div class="stat-card stat-success">
      <div class="stat-icon">
        <i class="bi bi-currency-dollar"></i>
      </div>
      <div class="stat-content">
        <h3>{{ formatearMoneda(estadisticas.valor_total_inventario) }}</h3>
        <p>Valor Total Inventario</p>
      </div>
    </div>

    <div class="stat-card stat-warning">
      <div class="stat-icon">
        <i class="bi bi-exclamation-triangle"></i>
      </div>
      <div class="stat-content">
        <h3>{{ estadisticas.stock_bajo }}</h3>
        <p>Stock Bajo</p>
      </div>
    </div>

    <div class="stat-card stat-danger">
      <div class="stat-icon">
        <i class="bi bi-x-circle"></i>
      </div>
      <div class="stat-content">
        <h3>{{ estadisticas.sin_stock }}</h3>
        <p>Sin Stock</p>
      </div>
    </div>

    <div class="stat-card stat-info">
      <div class="stat-icon">
        <i class="bi bi-stack"></i>
      </div>
      <div class="stat-content">
        <h3>{{ estadisticas.cantidad_total_items }}</h3>
        <p>Items Totales</p>
      </div>
    </div>

    <div class="stat-card stat-secondary">
      <div class="stat-icon">
        <i class="bi bi-tag"></i>
      </div>
      <div class="stat-content">
        <h3>{{ formatearMoneda(estadisticas.precio_promedio) }}</h3>
        <p>Precio Promedio</p>
      </div>
    </div>

    <div class="stat-card stat-dark">
      <div class="stat-icon">
        <i class="bi bi-bookmark"></i>
      </div>
      <div class="stat-content">
        <h3>{{ estadisticas.total_categorias }}</h3>
        <p>Categorías</p>
      </div>
    </div>
  </div>

  <!-- Loading de estadísticas -->
  <div *ngIf="cargandoEstadisticas" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-3">Cargando estadísticas...</p>
  </div>

  <!-- Gráficas -->
  <div class="graficas-grid" *ngIf="!cargandoGraficas">
    <!-- Gráfica de Categorías -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas id="chartCategorias"></canvas>
      </div>
    </div>

    <!-- Gráfica de Stock Bajo -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas id="chartStockBajo"></canvas>
      </div>
    </div>

    <!-- Gráfica de Top Productos -->
    <div class="chart-card chart-card-large">
      <div class="chart-container">
        <canvas id="chartTopProductos"></canvas>
      </div>
    </div>

    <!-- Gráfica de Distribución de Precios -->
    <div class="chart-card">
      <div class="chart-container">
        <canvas id="chartDistribucion"></canvas>
      </div>
    </div>
  </div>

  <!-- Loading de gráficas -->
  <div *ngIf="cargandoGraficas" class="text-center py-5">
    <div class="spinner-border text-success" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="mt-3">Cargando gráficas...</p>
  </div>
</div>